---
layout: post
category: Linux
---

### 安装 KVM

   1. 检测硬件是否支持安装 KVM

        lscpu     # 如果处理器支持虚拟化，输出结果中会有一行Virtualization的信息

   2. 安装 KVM

        sudo aptitude install qemu-kvm bridge-utils virt-manager

   3. 创建虚拟磁盘

        qemu-img create -f qcow2 debian_orig.img 10G

### 使用 KVM 金手指功能

  * 创建原磁盘的映射

        qemu-img create -f qcow2 -b centos_orig.img centos_ruby.img

  * 解决 KVM 网卡从 eth0 变成 eth1 问题
    1. 编辑 `/etc/udev/rules.d/70-persistent-net.rules`，注释掉 `NAME="eth0"` 那行，并把 `NAME="eth1"` 改成 `NAME="eth0"`
    2. 修改 `/etc/sysconfig/network-scripts/ifcfg-eth0`，将 MAC 地址修改为 eth1 的 MAC 地址
    3. 重启后生效
