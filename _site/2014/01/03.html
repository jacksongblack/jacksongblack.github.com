<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <link rel="shortcut icon" href="/publics/favicon.ico" type="image/x-icon" />
    <title>Kvm 安装及使用记录</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="/publics/main.css">
  </head>

  <body>
    <div class="header">
    </div>

    <div class="content">
      <h1>Kvm 安装及使用记录</h1>
<div class="meta nowrap">
  <span>分类：Linux</span>
  <span>日期：2014年01月03日</span>
</div>
<hr>

<div class="post">
  <h3>安装 KVM</h3>

<ol>
<li><p>检测硬件是否支持安装 KVM</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">lscpu     # 如果处理器支持虚拟化，输出结果中会有一行Virtualization的信息
</code></pre></div></li>
<li><p>安装 KVM</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">sudo aptitude install qemu-kvm bridge-utils virt-manager
</code></pre></div></li>
<li><p>创建虚拟磁盘</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">qemu-img create -f qcow2 debian_orig.img 10G
</code></pre></div></li>
</ol>

<h3>使用 KVM 金手指功能</h3>

<ul>
<li><p>创建原磁盘的映射</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">qemu-img create -f qcow2 -b centos_orig.img centos_ruby.img
</code></pre></div></li>
<li><p>解决 KVM 网卡从 eth0 变成 eth1 问题</p>

<ol>
<li>编辑 <code>/etc/udev/rules.d/70-persistent-net.rules</code>，注释掉 <code>NAME=&quot;eth0&quot;</code> 那行，并把 <code>NAME=&quot;eth1&quot;</code> 改成 <code>NAME=&quot;eth0&quot;</code></li>
<li>修改 <code>/etc/sysconfig/network-scripts/ifcfg-eth0</code>，将 MAC 地址修改为 eth1 的 MAC 地址</li>
<li>重启后生效</li>
</ol></li>
</ul>


  <hr>

  <div id="disqus_thread"></div>
  <script type="text/javascript">
  /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
  var disqus_shortname = 'tangjiujun-techblog'; // required: replace example with your forum shortname

  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
  
</div>

    </div>

    <div class="footer center">
      <span class="nowrap">
        文章统计：12篇，最后更新时间：2014-02-10
      </span>
    </div>

  </body>
</html>
